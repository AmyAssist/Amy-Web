<p *ngIf='!fetchingMails && fetchingError'>There was an error fetching messages from the backend</p>

<mat-spinner *ngIf=fetchingMails [diameter]=30></mat-spinner>

<button mat-raised-button *ngIf=!fetchingMails (click)='refresh()'>REFRESH</button>

<mat-tab-group mat-stretch-tabs (selectedTabChange)='tabChanged($event)'>
    <mat-tab label='All'>
    </mat-tab>
    <mat-tab label='Important'>
    </mat-tab>
</mat-tab-group>

<div *ngFor="let message of messages; let i = index" style="margin-top: 1em">
    <div *ngIf='showAll || message.important'>
        <mat-divider *ngIf="i != 0" class="messageDivider"></mat-divider>
        <div fxLayout="row">
            <div class="fromCol">
                <span class="mat-h3" [ngClass]="{'unseenMail': !message.seen, 'importantMail': message.important}">
                    {{message.from}}
                </span>
            </div>

            <div class="subjectCol">
                <span class="mat-body-1">
                    <strong *ngIf=!message.seen>{{message.subject}}</strong>
                    <span *ngIf=message.seen>{{message.subject}}</span>
                </span>
            </div>

            <div class="dateCol">
                <div fxLayout="column" class="mat-caption">
                    <span>{{getSentDate(message)}}</span>
                    <span>{{getSentTime(message)}}</span>
                </div>
            </div>
        </div>
    </div>
</div>