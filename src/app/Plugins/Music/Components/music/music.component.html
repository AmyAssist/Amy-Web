<mat-toolbar>
  <span>Music</span>
</mat-toolbar>

<mat-accordion>
  <mat-expansion-panel *ngIf=setup>
    <mat-expansion-panel-header>
      <mat-panel-title>
        Setup
      </mat-panel-title>
      <mat-panel-description>
        Richte deine Spotify-Verbindung ein.
      </mat-panel-description>
    </mat-expansion-panel-header>
    
    <div *ngIf=!setupStage2>
      <mat-form-field>
        <input matInput #clientID placeholder="ClientID">
      </mat-form-field>
    
      <mat-form-field>
        <input matInput #clientSecret placeholder="ClientSecret">
      </mat-form-field>
      
      <button mat-button color="primary" (click)="setInit(clientID.value, clientSecret.value)">Absenden</button>
    </div>
    <div *ngIf=setupStage2>
      <mat-card>Authentifikations-Link: {{spotifyLink}}</mat-card>

      <mat-form-field>
        <input matInput #accessToken placeholder="Access Token">
      </mat-form-field>

      <button mat-button color="primary" (click)="setToken(accessToken.value)">Absenden</button>
    </div>
  </mat-expansion-panel>
  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        Play Song
      </mat-panel-title>
      <mat-panel-description>
        Gib einen Song zum abspielen ein
      </mat-panel-description>
    </mat-expansion-panel-header>

    <mat-form-field>
      <input matInput #artist placeholder="Artist">
    </mat-form-field>

    <mat-form-field>
      <input matInput #song placeholder="Song">
    </mat-form-field>

    <button mat-icon-button color="primary" (click)="playSong(artist.value, song.value)">
      <mat-icon>play_arrow</mat-icon>
    </button>
  </mat-expansion-panel>
  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        Play Playlist
      </mat-panel-title>
      <mat-panel-description>
        Wähle eine Playlist aus
      </mat-panel-description>
    </mat-expansion-panel-header>
    <mat-tab-group>
      <mat-tab label="Featured Playlists">
        <div *ngFor="let playlist of playlistAllFeatured; let i = index">
          <mat-list-item role="listitem">
              <mat-label>{{playlistAllFeatured[i].name}}</mat-label>
              <button mat-icon-button color="primary" (click)="playPlaylistFeatured(i)">
                <mat-icon>play_circle_outline</mat-icon>
              </button>
            </mat-list-item>
        </div>
        <button mat-raised-button color="primary" (click)="getPlaylistFeatured()">Aktualisieren</button>
      </mat-tab>
      
      <mat-tab label="Eigene Playlists">
        <div *ngFor="let playlist of playlistAllUser; let i = index">
          <mat-list-item role="listitem">
              <mat-label>{{playlistAllUser[i].name}}</mat-label>
              <button mat-icon-button color="primary" (click)="playPlaylistUser(i)">
                <mat-icon>play_circle_outline</mat-icon>
              </button>
          </mat-list-item>
        </div>
        <button mat-raised-button color="primary" (click)="getPlaylistUser()">Aktualisieren</button>
      </mat-tab>
    </mat-tab-group>
  </mat-expansion-panel>
  
  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        Select Device
      </mat-panel-title>
      <mat-panel-description>
        Wähle eine Gerät aus
      </mat-panel-description>
    </mat-expansion-panel-header>

    <mat-form-field>
      <mat-select [(value)]="activeDeviceID">
        <mat-option *ngFor="let device of deviceAll; let i = index" value={{deviceAll[i].id}}>
          {{device.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <button mat-icon-button color="primary" (click)="setDevice(activeDeviceID)">
      <mat-icon>play_circle_outline</mat-icon>
    </button>

    <p>You selected: {{activeDeviceID}}</p>
    
    <button mat-raised-button color="primary" (click)="getDevs()">Aktualisieren</button>
  </mat-expansion-panel>
</mat-accordion>

<div>
  <button mat-raised-button color="primary" (click)="getCurrentSong()">Aktueller Song</button>
  
  <button mat-icon-button color="primary" (click)="setBack()">
    <mat-icon>fast_rewind</mat-icon>
  </button>
    <button mat-icon-button *ngIf=!playing color="primary" (click)="setResume()">
      <mat-icon>play_arrow</mat-icon>
    </button>   
    <button mat-icon-button *ngIf=playing color="primary" (click)="setPause()">
      <mat-icon>pause</mat-icon>
    </button>
  <button mat-icon-button color="primary" (click)="setSkip()">
    <mat-icon>fast_forward</mat-icon>
  </button>
  <mat-slider 
    [max]="volumeMax"
    [min]="volumeMin"
    [step]="volumeStep"
    [(ngModel)]="volumeValue"
    (change)="changeVolume(volumeValue)">
  </mat-slider>
</div>
<div *ngIf=song>
  <mat-list role="list">
    <mat-list-item role="listitem">Interpret: {{musicData.artist}}</mat-list-item>
    <mat-list-item role="listitem">Titel: {{musicData.title}}</mat-list-item>
  </mat-list>
</div>
<div *ngIf=playlist>
  <mat-list-item role="listitem" >Playlist: {{musicPlaylistData.name}}</mat-list-item>
    <mat-list>
      <mat-list-item *ngFor="let music of playlistSongs; let i = index"> 
        <p matLine>Song: {{i +1}}</p>
        <p matLine>Interpret: {{music.artist}}</p>
        <p matLine>Titel: {{music.title}}</p>
      </mat-list-item>
    </mat-list>
</div>